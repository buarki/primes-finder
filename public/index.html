<!DOCTYPE html>
<html>
 <head>
   <meta charset="utf-8">
   <title>Go + WebAssembly Example</title>
 </head>
 <body>
  <div>
    <h1>OI</h1>
    <label for="numberInput">Input</label>
    <input id="numberInput" type="number"></input>
    <button onclick="findPrimesOnClick()">go</button>
    <p id="result"></p>
  </div>
   <script src="/public/wasm_exec.js"></script>
   <script>
      const wasmFile = '/public/main.wasm';
      
      function findPrimesOnClick() {
        console.log('clicked');
        const go = new Go();

        WebAssembly.instantiateStreaming(fetch(wasmFile), go.importObject).then((result) => {
          go.run(result.instance);
          const limit = Number.parseInt(document.getElementById("numberInput").value, 10);
          const primes = findPrimes(limit);
          console.log('Prime numbers up to', limit, ':', JSON.parse(JSON.stringify(primes)));
          document.getElementById("result").innerHTML = `got ${JSON.stringify(primes)}`;
          return;
        });
      }
   </script>
 </body>
</html>
